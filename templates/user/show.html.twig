{% extends 'base.html.twig' %}

{% block title %}
  User
{% endblock %}

{% block body %}
  <section>
    <h1>
      Mon Profil
    </h1>
    <article class="card mb--2" style="width: 20rem;">
      <a href="{{
        path(
          'user_edit',
          {
            id: user.id
          }
        )
        }}">
        <i class="far fa-edit text-color-dark"></i>
      </a>
      <div class="card-header">
        {% if user.avatar %}
          <img src="{{ asset("upload/ #{user.avatar} ") }}"
            class="card-img-top"
            alt="Avatar de  {{ user.nickname }}" />
        {% else %}
          {% if user.gender == 'homme' %}
            <img src="{{ asset('assets/img/profil/avatar-homme.png') }}"
              class="card-img-top"
              alt="Avatar par défaut: silhouette {{ user.gender }}" />
          {% else %}
            <img src="{{ asset('assets/img/profil/avatar-femme.png') }}"
              class="card-img-top"
              alt="..." />
          {% endif %}
        {% endif %}
        <h3 class="card-title text-center">
          {{ user.nickname }}
        </h3>
        <p class="card-text text-center p--0">
          {{ user.getAge() }} ans - {{ user.city }}
        </p>
      </div>
      <div class="card-body">
        <p class="card-text">
          {{ user.description }}
        </p>
      </div>
    </article>
  </section>
  <section>
    <h2>
      Mes 5 livres favoris
    </h2>
    <div id="carouselExampleControls"
      class="carousel slide"
      data-bs-ride="carousel">
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img src="{{asset('assets/img/book/book.png')}}" class="d-block w-100" alt="..." />
        </div>
        <div class="carousel-item">
          <img src="..." class="d-block w-100" alt="..." />
        </div>
        <div class="carousel-item">
          <img src="..." class="d-block w-100" alt="..." />
        </div>
         <div class="carousel-item">
          <img src="..." class="d-block w-100" alt="..." />
        </div>
        <div class="carousel-item">
          <img src="..." class="d-block w-100" alt="..." />
        </div>
      </div>
      <a class="carousel-control-prev"
        href="#carouselExampleControls"
        role="button"
        data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </a>
      <a class="carousel-control-next"
        href="#carouselExampleControls"
        role="button"
        data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </a>
    </div>
  </section>
  <section>
    <h2>
      Ma Bilbiothèque
    </h2>
  </section>

  <table class="table">
    <tbody>
      <tr>
        <th>
          Nickname
        </th>
        <td>
          {{ user.nickname }}
        </td>
      </tr>
      <tr>
        <th>
          Gender
        </th>
        <td>
          {{ user.gender }}
        </td>
      </tr>
      <tr>
        <th>
          Birthdate
        </th>
        <td></td>
      </tr>
      <tr>
        <th>
          Email
        </th>
        <td>
          {{ user.email }}
        </td>
      </tr>
      <tr>
        <th>
          Address
        </th>
        <td>
          {{ user.address }}
        </td>
      </tr>
      <tr>
        <th>
          Postal_code
        </th>
        <td>
          {{ user.postalCode }}
        </td>
      </tr>
      <tr>
        <th>
          City
        </th>
        <td>
          {{ user.city }}
        </td>
      </tr>
      <tr>
        <th>
          Preference
        </th>
        <td>
          {{ user.preference }}
        </td>
      </tr>
      <tr>
        <th>
          Roles
        </th>
        <td>
          {{ user.roles ? user.roles|json_encode : '' }}
        </td>
      </tr>
      <tr>
        <th>
          Password
        </th>
        <td>
          {{ user.password }}
        </td>
      </tr>
      <tr>
        <th>
          Description
        </th>
        <td></td>
      </tr>
      <tr>
        <th>
          Last_connection
        </th>
        <td>
          {{ user.lastConnection
            ? user.lastConnection|date('Y-m-d H:i:s')
            : '' }}
        </td>
      </tr>
      <tr>
        <th>
          Created_at
        </th>
        <td>
          {{ user.createdAt ? user.createdAt|date('Y-m-d H:i:s') : '' }}
        </td>
      </tr>
      <tr>
        <th>
          Updated_at
        </th>
        <td>
          {{ user.updatedAt ? user.updatedAt|date('Y-m-d H:i:s') : '' }}
        </td>
      </tr>
    </tbody>
  </table>
  <table class="table">
    <thead>
      <tr>
        <th>
          Id
        </th>
        <th>
          Title
        </th>
        <th>
          Synopsis
        </th>
        <th>
          Thumbnail
        </th>
        <th>
          Language
        </th>
        <th>
          Genre
        </th>
        <th>
          Isbn
        </th>
        <th>
          Publication_date
        </th>
        <th>
          Created_at
        </th>
        <th>
          Updated_at
        </th>
        <th>
          Publisher
        </th>
        <th>
          Author
        </th>
        <th>
          actions
        </th>
      </tr>
    </thead>
    <tbody>
      {% for book in books %}
        <tr>
          <td>
            {{ book.id }}
          </td>
          <td>
            {{ book.title }}
          </td>
          <td>
            {{ book.synopsis }}
          </td>
          <td>
            {{ book.thumbnail }}
          </td>
          <td>
            {{ book.language }}
          </td>
          {% for genre in book.genre %}
            <td>
              {{ genre.name }}
            </td>
          {% endfor %}
          <td>
            {{ book.isbn }}
          </td>
          <td>
            {{ book.publicationDate
              ? book.publicationDate|date('Y-m-d H:i:s')
              : '' }}
          </td>
          <td>
            {{ book.createdAt ? book.createdAt|date('Y-m-d H:i:s') : '' }}
          </td>
          <td>
            {{ book.updatedAt ? book.updatedAt|date('Y-m-d H:i:s') : '' }}
          </td>
          <td>
            {{ book.publisher }}
          </td>
          <td>
            {{ book.author }}
          </td>
          <td>
            <a href="{{
              path(
                'book_show',
                {
                  id: book.id
                }
              )
              }}">
              show
            </a>
            <a href="{{
              path(
                'book_edit',
                {
                  id: book.id
                }
              )
              }}">
              edit
            </a>
          </td>
        </tr>
      {% else %}
        <tr>
          <td colspan="12">
            no records found
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <a href="{{ path('user_index') }}">back to list</a>

  <a href="{{
    path(
      'user_edit',
      {
        id: user.id
      }
    )
    }}">
    edit
  </a>

  {{ include('user/_delete_form.html.twig') }}
{% endblock %}
